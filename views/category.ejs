<%- include('layout', { body: `
<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
  <!-- Breadcrumb -->
  <nav class="mb-6 text-sm text-gray-500">
    <a href="/" class="hover:text-gray-300">Home</a>
    <span class="mx-2">/</span>
    <a href="/servers" class="hover:text-gray-300">Servers</a>
    <span class="mx-2">/</span>
    <span class="text-gray-300">${category.name}</span>
  </nav>

  <!-- Header -->
  <div class="mb-8">
    <h1 class="text-2xl font-bold text-white">${category.name} MCP Servers</h1>
    ${category.description ? `<p class="text-gray-400 mt-2">${category.description}</p>` : ''}
    <p class="text-gray-500 text-sm mt-1">${total.toLocaleString()} servers</p>
  </div>

  <!-- Sort -->
  <form action="/category/${category.slug}" method="GET" class="mb-6 flex gap-3">
    <select name="sort" onchange="this.form.submit()" class="bg-gray-800 border border-gray-700 rounded-lg px-3 py-2 text-sm text-gray-200 focus:outline-none focus:ring-2 focus:ring-brand-500">
      <option value="quality" ${sort === 'quality' ? 'selected' : ''}>Quality Score</option>
      <option value="stars" ${sort === 'stars' ? 'selected' : ''}>Stars</option>
      <option value="downloads" ${sort === 'downloads' ? 'selected' : ''}>Downloads</option>
      <option value="recent" ${sort === 'recent' ? 'selected' : ''}>Recently Updated</option>
      <option value="name" ${sort === 'name' ? 'selected' : ''}>Name</option>
    </select>
  </form>

  <!-- Server Grid -->
  <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4">` +
    servers.map(server => `
    <a href="/servers/${server.slug}" class="block bg-gray-900 border border-gray-800 rounded-xl p-5 hover:border-brand-500/50 hover:bg-gray-900/80 transition-all group">
      <div class="flex items-start justify-between gap-3 mb-3">
        <h3 class="font-semibold text-white group-hover:text-brand-400 transition-colors truncate text-sm">${server.name}</h3>
        ${server.qualityScore ? `<span class="shrink-0 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${server.qualityScore >= 70 ? 'bg-green-900/50 text-green-400' : server.qualityScore >= 40 ? 'bg-yellow-900/50 text-yellow-400' : 'bg-gray-800 text-gray-400'}">${server.qualityScore}</span>` : ''}
      </div>
      <p class="text-gray-400 text-xs line-clamp-2 mb-3 min-h-[2rem]">${server.description || 'No description available'}</p>
      <div class="flex items-center gap-3 text-xs text-gray-500">
        ${server.stars ? `<span>${server.stars.toLocaleString()} &#9733;</span>` : ''}
        ${server.weeklyDownloads ? `<span>${server.weeklyDownloads.toLocaleString()}/wk</span>` : ''}
      </div>
    </a>`).join('') + `
  </div>

  <!-- Pagination -->
  ${totalPages > 1 ? `
  <div class="mt-8 flex items-center justify-center gap-2">
    ${page > 1 ? `<a href="/category/${category.slug}?sort=${sort}&page=${page - 1}" class="px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg text-sm text-gray-300 hover:bg-gray-700 transition-colors">&larr; Prev</a>` : ''}
    <span class="px-3 py-2 text-sm text-gray-400">Page ${page} of ${totalPages}</span>
    ${page < totalPages ? `<a href="/category/${category.slug}?sort=${sort}&page=${page + 1}" class="px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg text-sm text-gray-300 hover:bg-gray-700 transition-colors">Next &rarr;</a>` : ''}
  </div>` : ''}
</div>
` }) %>
